<!DOCTYPE html>
<html>
  <head>/
    <meta charset="UTF-8">
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <style>
      body {
        margin: 0;
        font-family: 'Montserrat', sans-serif;
      }

      .app {
        display: flex;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        align-items: center;
        justify-content: center;

        background: -webkit-linear-gradient(90deg, #348F50 10%, #56B4D3 90%);
        background:    -moz-linear-gradient(90deg, #348F50 10%, #56B4D3 90%);
        background:     -ms-linear-gradient(90deg, #348F50 10%, #56B4D3 90%);
        background:         linear-gradient(90deg, #348F50 10%, #56B4D3 90%);
      }

      .displayName {
        color: rgba(255,255,255,.6);
        margin-right: 15px;
      }

    </style>
  </head>
  <body>
    <div class="app">
      <span class="displayName"></span>
    </div>
    <script>
      get('/environment', function(response) {
        var app = document.querySelector('.app');
        var displayName = document.querySelector('.displayName');
        var avatar = document.createElement('img');
        displayName.innerText = response.displayName;
        avatar.setAttribute('src', response.avatar);
        app.appendChild(avatar);
      });

      function get(url, callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url);
        xhr.responseType = 'json';
        xhr.onload = function() {
          if(xhr.status === 401) {
            window.location = '/';
          }
          callback(this.response);
        };
        xhr.send();
      };
    </script>
  </body>
</html>

